(this["webpackJsonpswitch-card-web-mng"]=this["webpackJsonpswitch-card-web-mng"]||[]).push([[12],{273:function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(0),c=a.n(n),r=a(330),o={404:"\u53d1\u51fa\u7684\u8bf7\u6c42\u9488\u5bf9\u7684\u662f\u4e0d\u5b58\u5728\u7684\u8bb0\u5f55\uff0c\u670d\u52a1\u5668\u6ca1\u6709\u8fdb\u884c\u64cd\u4f5c\u3002",403:"\u7528\u6237\u672a\u5f97\u5230\u6388\u6743\u3002",500:"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u3002"},i={1:"\u5c45\u6c11\u8eab\u4efd\u8bc1",2:"\u9999\u6e2f\u5c45\u6c11\u6765\u5f80\u5185\u5730\u901a\u884c\u8bc1",3:"\u9999\u6e2f\u5c45\u6c11\u5c45\u4f4f\u8bc1",4:"\u53f0\u6e7e\u5c45\u6c11\u5f80\u6765\u5927\u9646\u901a\u884c\u8bc1",5:"\u53f0\u6e7e\u5c45\u6c11\u5c45\u4f4f\u8bc1",6:"\u6fb3\u95e8\u5c45\u6c11\u6765\u5f80\u5185\u5730\u901a\u884c\u8bc1",7:"\u6fb3\u95e8\u5c45\u6c11\u5c45\u4f4f\u8bc1"},l={10:"\u5f85\u51fa\u552e",20:"\u51fa\u552e\u4e2d",21:"\u91cd\u65b0\u51fa\u552e\u4e2d",22:"\u7528\u6237\u4e0b\u67b6",23:"\u7cfb\u7edf\u4e0b\u67b6",30:"\u5f85\u652f\u4ed8",31:"\u5df2\u652f\u4ed8",32:"\u5df2\u53d1\u8d27",33:"\u5f85\u8bc4\u4ef7",34:"\u51fa\u552e\u5b8c\u6210"},s=r.a.Option,m=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u65e0";return e[t]||a},u=function(e){return Object.entries(e).map((function(e){return c.a.createElement(s,{value:e[0],key:e[0]},e[1])}))}},276:function(e,t,a){e.exports={commentAction:"commentAction_2HQVi",commenrsWrap:"commenrsWrap_295ot",discountPrice:"discountPrice_OteKq",originalPrice:"originalPrice_1XApV",finalPrice:"finalPrice_TgbCe",logisticsName:"logisticsName_3esew",logisticsTime:"logisticsTime_1wYzr",warnInfo:"warnInfo_2ftjT"}},277:function(e,t,a){"use strict";var n=a(143),c=new n.b.Entity("users",{},{idAttribute:function(e){return e.id}}),r=new n.b.Entity("goods",{},{idAttribute:function(e){return e.id}}),o={USER:c,USER_ARRAY:[c],GOOD:r,GOOD_ARRAY:[r]};t.a=o},305:function(e,t,a){"use strict";a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return g}));var n=a(54),c=a.n(n),r=a(8),o=a(70),i=a(30),l=a(96),s=a(57),m=a(277),u=a(183),d=function(e){return function(t){return t(Object(i.a)({},l.a,{type:s.e,schema:m.a.GOOD_ARRAY,endpoint:"/goods",options:e}))}},b=function(e,t){return function(){var a=Object(o.a)(c.a.mark((function a(n,o){var m,b,f,p,g,E,O,k,v,h,j;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n(Object(i.a)({},l.a,{type:s.b,endpoint:"/goods/closeOrder",method:"POST",payload:e}));case 2:m=a.sent,200===m.code&&(u.b.success("\u8ba2\u5355\u5173\u95ed\u6210\u529f"),t(),b=o(),f=b.filter,p=b.meta,g=f.goods,E=p.goods,O=Object(r.a)(Object(r.a)({},g),E),E&&(k=E.total,v=E.pageSize,h=E.current,k&&(j=Math.ceil((k-1)/v),j=(j=h>j?h-1:h)<=0?1:j,O.current=j)),n(d(O)));case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},f=function(e){return function(t){return t(Object(i.a)({},l.a,{type:s.c,endpoint:"/goods/comments",options:e}))}},p=function(e){return function(t){return t(Object(i.a)({},l.a,{type:s.d,endpoint:"/goods/logistics",options:e}))}},g=function(e){return function(t){return t(Object(i.a)({},l.a,{type:s.a,endpoint:"/goods/comments/check",method:"post",payload:e}))}}},479:function(e,t,a){"use strict";a.r(t);var n=a(127),c=a(0),r=a.n(c),o=a(125),i=a(17),l=a(47),s=a(305),m=a(466),u=a(83),d=a(273),b=a(434),f=a.n(b),p=function(e){var t=e.img,a=e.alt,n=void 0===a?"\u56fe\u7247":a,c=e.set,o=e.index,i=c.map((function(e,t){return{src:e,alt:c.length>0?"".concat(n,"-").concat(t):n}}));return r.a.createElement(f.a,{src:t,alt:n,set:i,defaultPage:o})},g=a(276),E=a.n(g),O=m.a.Item,k=function(e){var t=e.baseInfo;return r.a.createElement(m.a,null,r.a.createElement(O,{label:"ID"},t.id),r.a.createElement(O,{label:"\u540d\u79f0"},t.name),r.a.createElement(O,{label:"\u7528\u6237\u59d3\u540d"},t.userName),r.a.createElement(O,{label:"\u5546\u54c1\u56fe",span:3},t.showImage.map((function(e,t,a){return r.a.createElement("p",{className:"small-image-preview",key:t},r.a.createElement(p,{img:e,alt:"\u5546\u54c1\u56fe",set:a,index:t}))}))),r.a.createElement(O,{label:"\u72b6\u6001"},Object(d.d)(d.a,t.state)),r.a.createElement(O,{label:"\u63cf\u8ff0"},t.description),r.a.createElement(O,{label:"\u559c\u7231\u6570"},t.linkCount),r.a.createElement(O,{label:"\u521b\u5efa\u65f6\u95f4"},Object(u.a)(t.createDate)),r.a.createElement(O,{label:"\u66f4\u65b0\u65f6\u95f4"},Object(u.a)(t.createDate)),r.a.createElement(O,{label:"\u5b9a\u4ef7"},r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:E.a.discountPrice},"\xa5",t.discountPrice||0),r.a.createElement("span",null," / "),r.a.createElement("span",{className:E.a.originalPrice},"\xa5",t.originalPrice||0))),(21===t.state||22===t.state||23===t.state)&&r.a.createElement(O,{label:"\u5907\u6ce8",span:3},t.remarks),t.state>=30&&[r.a.createElement(O,{label:"\u8d2d\u4e70\u8005",key:"1"},t.buyerName),r.a.createElement(O,{label:"\u6210\u4ea4\u4ef7",key:"2",span:2},r.a.createElement("span",{className:E.a.finalPrice},"\xa5",t.finalPrice||0))],t.state>=32&&[r.a.createElement(O,{label:"\u5feb\u9012\u5355\u53f7",key:"1"},t.mailNo),r.a.createElement(O,{label:"\u5feb\u9012\u516c\u53f8",key:"2",span:2},t.mailName)])},v=a(8),h=a(93),j=a(287),y=a(472),C=a(480),N=a(144),I=a(481),w=a(464),P=a(489),S=a(113),A=a.n(S),L=a(475),x=a(477),G=a(331),_=a(465),D=a(467),T=L.a.Item,z=x.a.TextArea,R=G.a.Group,Y=function(e){var t=L.a.useForm(),a=Object(n.a)(t,1)[0],c=e.visible,o=e.baseId,i=e.content,l=e.isLoading,s=function(){a.resetFields(),e.onCancel()};return r.a.createElement(_.a,{visible:c,title:"\u5ba1\u6838\u8bc4\u8bba",onCancel:s,maskClosable:!1,okType:"danger",onOk:function(){a.validateFields().then((function(t){var a=e.onCheckCallback;(0,e.onCheckComment)(Object(v.a)(Object(v.a)({},t),{},{commentId:o})).then((function(e){200===e.code&&(a(o,t.state,t.remarks),s())}))})).catch((function(e){console.log("Validate Failed:",e)}))},confirmLoading:l},r.a.createElement(L.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:17}}},{layout:"horizontal",form:a}),r.a.createElement(D.a,{message:"\u8bf7\u5ba1\u6838\u4ee5\u4e0b\u8bc4\u8bba\u662f\u5426\u5408\u89c4",description:i,type:"info",showIcon:!0,style:{marginBottom:12}}),r.a.createElement(T,{name:"state",label:"\u5ba1\u6838",rules:[{required:!0}]},r.a.createElement(R,{options:[{label:"\u901a\u8fc7",value:2},{label:"\u62d2\u7edd",value:3}]})),r.a.createElement(T,{name:"remarks",label:"\u539f\u56e0",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){return a||2===t("state")?Promise.resolve():Promise.reject("\u8bf7\u8f93\u5165\u5ba1\u6838\u4e0d\u901a\u8fc7\u7684\u539f\u56e0")}}}],dependencies:["state"]},r.a.createElement(z,{placeholder:"\u8bf7\u8f93\u5165\u539f\u56e0"}))))},F=function(e){var t=e.baseId,a=e.onGetComment,o=e.commentCount,i=e.isLoading,l=e.onCheckComment,s=Object(c.useState)([]),m=Object(n.a)(s,2),u=m[0],d=m[1],b=Object(c.useState)({current:1,pageSize:10,total:0}),f=Object(n.a)(b,2),p=f[0],g=f[1],O=Object(c.useState)({visible:!1,baseId:"",content:""}),k=Object(n.a)(O,2),S=k[0],L=k[1];Object(c.useEffect)((function(){x(p)}),[]);var x=function(e){a(Object(v.a)(Object(v.a)({},e),{},{goodsId:t})).then((function(e){200===e.code&&(d(e.response||[]),g(e.meta||{}))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:E.a.commenrsWrap},r.a.createElement(I.a,{title:"\u603b\u8bc4\u8bba\u6570",value:o,valueStyle:{color:"#ff4d4f"}}),function e(t){var a=function(e){return[r.a.createElement("span",{key:"like"},r.a.createElement(P.a,null),r.a.createElement("span",{className:E.a.commentAction},e.likeCount)),r.a.createElement("span",{key:"operating"},1===e.state?r.a.createElement(h.a,{type:"link",onClick:function(){return t=e.id,a=e.content,void L({visible:!0,baseId:t,content:a});var t,a}},"\u5ba1\u6838"):[r.a.createElement(j.a,{key:"1",color:2===e.state?"#87d068":"#ff5500"},2===e.state?"\u5ba1\u6838\u901a\u8fc7":"\u5ba1\u6838\u4e0d\u901a\u8fc7"),r.a.createElement("span",{key:"2"}," ",e.remarks)])]};return t.map((function(t,n){return r.a.createElement(y.a,{key:n,actions:a(t),author:t.author,avatar:r.a.createElement(C.a,{src:t.avatar,alt:t.author}),content:"".concat(t.toUserName?"\u56de\u590d@"+t.toUserName+": ":"").concat(t.content),datetime:r.a.createElement(N.a,{title:A()(t.createDate).format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,A()(t.createDate).fromNow()))},t.comment?e(t.comment):null)}))}(u)),r.a.createElement(w.a,{total:p.total,current:p.current,pageSize:p.pageSize,hideOnSinglePage:!0,showSizeChanger:!0,showQuickJumper:!0,onChange:function(e){x(Object(v.a)(Object(v.a)({},p),{},{current:e}))},onShowSizeChange:function(e,t){x(Object(v.a)(Object(v.a)({},p),{},{current:1,pageSize:t}))},style:{textAlign:"right"},disabled:i}),r.a.createElement(Y,{visible:S.visible,baseId:S.baseId,onCancel:function(){L({visible:!1,baseId:"",content:""})},content:S.content,onCheckComment:l,isLoading:i,onCheckCallback:function(e,t,a){d((function(n){return n.map((function(n){return n.id===e&&(n.state=t,a&&(n.remarks=a)),n}))}))}}))},U=a(484),J=a(476),V=U.a.Item,H=function(e){var t=e.onGetLogistics,a=e.baseId,o=e.mailNo,i=e.mailName,l=e.isLoading,s=Object(c.useState)({}),m=Object(n.a)(s,2),u=m[0],d=m[1];return Object(c.useEffect)((function(){t({goodsId:a,mailNo:o,mailName:i}).then((function(e){200===e.code&&d(e.response)}))}),[]),r.a.createElement(J.a,{loading:l,active:!0},r.a.createElement("p",{className:E.a.logisticsName},u.expTextName," ",u.mailNo),r.a.createElement("p",{className:E.a.logisticsTime},"\u6700\u540e\u66f4\u65b0\u4e8e: ",u.updateStr),r.a.createElement(U.a,{mode:"left"},Array.isArray(u.data)&&u.data.map((function(e,t){return r.a.createElement(V,{key:t,color:0===t?"blue":"gray"},r.a.createElement("p",null,e.time),r.a.createElement("p",null,e.context))}))))},M=o.a.TabPane;t.default=Object(l.c)((function(e){return{isLoading:e.system.isLoading}}),{getGoodsCommentsPageList:s.c,getGoodsLogistics:s.d,checkComment:s.a})((function(e){var t=Object(i.i)(),a=Object(c.useState)(JSON.parse(decodeURIComponent(t.goodsInfo))),l=Object(n.a)(a,1)[0],s=e.getGoodsCommentsPageList,m=e.getGoodsLogistics,u=e.isLoading,d=e.checkComment;return r.a.createElement(o.a,{defaultActiveKey:"1"},r.a.createElement(M,{tab:"\u57fa\u672c\u4fe1\u606f",key:"1"},r.a.createElement(k,{baseInfo:l})),r.a.createElement(M,{tab:"\u8bc4\u8bba",key:"2"},r.a.createElement(F,{baseId:l.id,onGetComment:s,commentCount:l.commentCount,isLoading:u,onCheckComment:d})),l.state>=32&&r.a.createElement(M,{tab:"\u7269\u6d41\u4fe1\u606f",key:"3"},r.a.createElement(H,{baseId:l.id,mailNo:l.id,mailName:l.mailName,onGetLogistics:m,isLoading:u})))}))}}]);
//# sourceMappingURL=12.3b18595a.chunk.js.map